### Publishing data -- **DRAFT**

Agave provides multiple ways to share your data with your colleagues and the general public. In addition to the standard permission model enabling you to share your data with one or more authenticated users within the Platform, you also have the ability to publish your data and make it available via an unauthenticated public URL. Unlike with traditional web and cloud hosting, your data remains in its original location and is served in situ by Agave upon user request.

<aside class="info">See the <a href="#postits">PostIts Guide</a> for other ways to securely share your data with others.</aside>

#### Publishing individual files

> Publish file item for public access

```shell
curl -sk -H "Authorization: Bearer $ACCESS_TOKEN" \
    -H "Content-Type: application/json" \
    -X POST \
    --data '{"username","public", "permission":"READ"}' \
    https://public.tenants.agaveapi.co/files/v2/pems/system/data.agaveapi.co/nryan/picksumipsum.txt
```

```plaintext
files-pems-addupdate \
    -u public \
    -p READ \
    -S data.agaveapi.co \
    nryan/picksumipsum.txt
```

> The response will look something like the following:

```json
{
  "username": "public",
  "permission": {
    "read": true,
    "write": false,
    "execute": false
  },
  "recursive": false,
  "_links": {
    "self": {
      "href": "https://public.tenants.agaveapi.co/files/v2/pems/system/data.agaveapi.co/nryan/picksumipsum.txt?username.eq=$SHARE_USERNAME"
    },
    "file": {
      "href": "https://public.tenants.agaveapi.co/files/v2/pems/system/data.agaveapi.co/nryan/picksumipsum.txt"
    },
    "profile": {
      "href": "https://public.agaveapi.co/profiles/v2/$SHARE_USERNAME"
    }
  }
}
```

#### Publishing directories

> Publish directory for public access

```shell
curl -sk -H "Authorization: Bearer $ACCESS_TOKEN" \
    -H "Content-Type: application/json" \
    -X POST \
    --data '{"username","public", "permission":"READ", "recursive": true}' \
    https://public.tenants.agaveapi.co/files/v2/pems/system/data.agaveapi.co/nryan/public
```

```plaintext
files-pems-addupdate \
    --recursive \
    -u public \
    -p READ \
    -S data.agaveapi.co \
    nryan/public
```

> The response will look something like the following:

```json
{
  "username": "public",
  "permission": {
    "read": true,
    "write": false,
    "execute": false
  },
  "recursive": true,
  "_links": {
    "self": {
      "href": "https://public.tenants.agaveapi.co/files/v2/pems/system/data.agaveapi.co/nryan/public?username.eq=public"
    },
    "file": {
      "href": "https://public.tenants.agaveapi.co/files/v2/pems/system/data.agaveapi.co/nryan/public"
    },
    "profile": {
      "href": "https://public.agaveapi.co/profiles/v2/nryan"
    }
  }
}
```

Publishing an entire directory is similar to publishing a single file item. Simply include a `recursive` field to your request with a value of `true`. Once published, the directory will be available through Agave's public download URLS. The structure of the directory's url is predictable. Each user has a unique namespace for their published data.

 `https://public.agaveapi.co/files/v2/download/<username>/system/<system_id>/<path>`